{"version":3,"sources":["store.js","actions/index.js","components/shopping-cart-table/shopping-cart-table.js","components/shopping-cart-table/index.js","components/bookstore-service-context/bookstore-service-context.js","components/HOC/index.js","components/HOC/with-bookstore-service.js","utils/index.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/book-list/index.js","components/book-list/book-list.js","containers/book-list-container/book-list-container.js","containers/book-list-container/index.js","components/pages/home-page.js","components/pages/cart-page.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/app/index.js","components/app/app.js","components/error-boundary/index.js","components/error-boundary/error-boundary.js","reducers/update-book-list.js","reducers/update-shopping-cart.js","reducers/index.js","index.js","services/bookstore-service.js"],"names":["delay","fetchBooks","bookstoreService","dispatch","getBooks","type","then","data","payload","catch","error","booksError","bookAddedToCart","bookId","mapDispatchToProps","onDelete","onDecrease","onIncrease","ShoppingCartTable","connect","_ref2","shoppingCart","items","cartItems","total","orderTotal","_ref","react_default","a","createElement","className","map","item","index","id","title","count","key","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","Object","assign","updateCart","state","countToAdd","books","bookList","book","find","itemIndex","findIndex","newItem","updateCartItem","updateItems","price","concat","toConsumableArray","slice","arguments","length","undefined","_item$id","_item$title","_item$count","_item$total","Spinner","ErrorIndicator","BookListItem","onAdd","author","coverImage","src","alt","BookList","components_book_list_item","BookListContainer","this","_this$props","isLoading","components_spinner","components_error_indicator","components_book_list","Component","_len","funcs","Array","_key","component","reduceRight","acc","f","compose","bindActionCreators","HomePage","Fragment","containers_book_list_container","components_shopping_cart_table","CartPage","ShopHeader","_ref3","numItems","reduce","react_router_dom","to","App","role","components_shop_header","react_router","path","exact","ErrorBoundary","hasError","setState","children","updateBookList","action","_state$bookList","updateShoppingCart","_state$shoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","getState","console","log","setTimeout","Promise","resolve","reject","Math","random","_this","Error","render","es","components_error_boundary","value","components_app","document","getElementById"],"mappings":"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","file":"static/js/main.71db102c.chunk.js","sourcesContent":["import { createStore, applyMiddleware } from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\"; // исходный код - 14 строк\r\nimport reducer from \"./reducers\";\r\n\r\nconst logMiddleware = ({ getState }) => next => action => {\r\n  console.log(action.type, getState());\r\n  return next(action);\r\n};\r\n\r\nconst stringMiddleware = () => next => action => {\r\n  if (typeof action === \"string\") {\r\n    return next({ type: action });\r\n  }\r\n  return next(action);\r\n};\r\n\r\n// thunkMiddleware используется для того, чтобы была возможность передавать\r\n// в dispatch не только action, но и функцию (например, myAction ниже)\r\n// удобно для описания асинхронных процессов в виде action\r\nconst store = createStore(\r\n  reducer,\r\n  applyMiddleware(thunkMiddleware, stringMiddleware, logMiddleware)\r\n);\r\n\r\n/*const myAction = dispatch => {\r\n  setTimeout(\r\n    () =>\r\n      dispatch({\r\n        type: \"DELAYED_ACTION\"\r\n      }),\r\n    2000\r\n  );\r\n};*/\r\n\r\n// функция, создающая action типа myAction с задержкой:\r\nconst delayedActionCreator = delay => dispatch => {\r\n  setTimeout(\r\n    () =>\r\n      dispatch({\r\n        type: \"DELAYED_ACTION\"\r\n      }),\r\n    delay\r\n  );\r\n};\r\n\r\n// store.dispatch(myAction);\r\nstore.dispatch(delayedActionCreator(5000));\r\n\r\n//store.dispatch(\"HELLO_WORLD\");\r\n\r\nexport default store;\r\n","// 1 работа с сервисом\r\nconst booksLoaded = newBooks => {\r\n  return {\r\n    type: \"FETCH_BOOKS_SUCCESS\",\r\n    payload: newBooks\r\n  };\r\n};\r\n\r\nconst booksRequested = () => {\r\n  return {\r\n    type: \"FETCH_BOOKS_REQUEST\"\r\n  };\r\n};\r\n\r\nconst booksError = error => {\r\n  return {\r\n    type: \"FETCH_BOOKS_ERROR\",\r\n    payload: error\r\n  };\r\n};\r\n\r\n// старая версия, для работы без thunkMiddleware\r\n/*const fetchBooksOld = (bookstoreService, dispatch) => () => {\r\n  const { getBooks } = bookstoreService;\r\n  dispatch(booksRequested());\r\n\r\n  getBooks()\r\n    .then(data => dispatch(booksLoaded(data)))\r\n    .catch(error => dispatch(booksError(error)));\r\n};*/\r\n\r\n// новая версия, для работы с thunkMiddleware\r\nconst fetchBooks = bookstoreService => () => (dispatch) => {\r\n  const { getBooks } = bookstoreService;\r\n  dispatch(booksRequested());\r\n\r\n  getBooks()\r\n    .then(data => dispatch(booksLoaded(data)))\r\n    .catch(error => dispatch(booksError(error)));\r\n}\r\n\r\n// 2 - работа с корзиной\r\nconst bookAddedToCart = (bookId) => {\r\n  return {\r\n    type: \"BOOK_ADDED_TO_CART\",\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nconst allBooksDeletedFromCart = (bookId) => {\r\n  return {\r\n    type: \"ALL_BOOKS_DELETED_FROM_CART\",\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nconst bookDeletedFromCart = (bookId) => {\r\n  return {\r\n    type: \"BOOK_DELETED_FROM_CART\",\r\n    payload: bookId,\r\n  };\r\n};\r\n\r\nexport { fetchBooks, bookAddedToCart, bookDeletedFromCart, allBooksDeletedFromCart };\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./shopping-cart-table.css\";\r\n\r\nimport {\r\n  bookAddedToCart,\r\n  bookDeletedFromCart,\r\n  allBooksDeletedFromCart\r\n} from \"../../actions\";\r\n\r\nconst ShoppingCartTable = ({\r\n  items,\r\n  total,\r\n  onIncrease,\r\n  onDecrease,\r\n  onDelete\r\n}) => {\r\n  const renderRow = (item, index) => {\r\n    const { id, title, count, total } = item;\r\n\r\n    return (\r\n      <tr key={id}>\r\n        <td className=\"id\">{index + 1}</td>\r\n        <td className=\"title\">{title}</td>\r\n        <td className=\"count\">{count}</td>\r\n        <td className=\"price\">${total}</td>\r\n        <td className=\"action\">\r\n          <button\r\n            className=\"btn btn-outline-danger btn-sm float-right\"\r\n            onClick={() => onDelete(id)}\r\n          >\r\n            <i className=\"fa fa-trash-o\" />\r\n          </button>\r\n          <button\r\n            className=\"btn btn-outline-success btn-sm float-right\"\r\n            onClick={() => onIncrease(id)}\r\n          >\r\n            <i className=\"fa fa-plus-circle\" />\r\n          </button>\r\n          <button\r\n            className=\"btn btn-outline-warning btn-sm float-right\"\r\n            onClick={() => onDecrease(id)}\r\n          >\r\n            <i className=\"fa fa-minus-circle\" />\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"shopping-cart-table\">\r\n      <h2>Your Order</h2>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th className=\"id\">#</th>\r\n            <th className=\"title\">Item</th>\r\n            <th className=\"count\">Count</th>\r\n            <th className=\"price\">Price</th>\r\n            <th className=\"action\">Action</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>{items.map(renderRow)}</tbody>\r\n      </table>\r\n\r\n      <div className=\"total\">Total: ${total}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart }) => {\r\n  const { cartItems, orderTotal } = shoppingCart;\r\n  return {\r\n    items: cartItems,\r\n    total: orderTotal\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  onDelete: allBooksDeletedFromCart,\r\n  onDecrease: bookDeletedFromCart,\r\n  onIncrease: bookAddedToCart\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ShoppingCartTable);\r\n","import ShoppingCartTable from './shopping-cart-table';\r\n\r\nexport default ShoppingCartTable;\r\n","import React from \"react\";\r\n\r\nconst {\r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer,\r\n} = React.createContext();\r\n\r\nexport {\r\n  BookstoreServiceProvider,\r\n  BookstoreServiceConsumer,\r\n};\r\n","import withBookstoreService from './with-bookstore-service';\r\n\r\nexport default withBookstoreService;","import React from \"react\";\r\nimport { BookstoreServiceConsumer } from \"../bookstore-service-context\";\r\n\r\nconst withBookstoreService = () => Wrapped => {\r\n  return props => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {bookstoreService => {\r\n          return (\r\n            <Wrapped\r\n              {...props}\r\n              bookstoreService={bookstoreService}\r\n            />\r\n          );\r\n        }}\r\n      </BookstoreServiceConsumer>\r\n    );\r\n  };\r\n};\r\n\r\nexport default withBookstoreService;\r\n","const compose = (...funcs) => component =>\r\n  funcs.reduceRight((acc, f) => f(acc), component);\r\n\r\nconst updateCart = (bookId, state, countToAdd) => {\r\n  const { shoppingCart, bookList } = state;\r\n  const { books } = bookList;\r\n  const { cartItems, orderTotal } = shoppingCart;\r\n  const book = books.find(({ id }) => id === bookId);\r\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\r\n  const item = cartItems[itemIndex];\r\n  const newItem = updateCartItem(book, item, countToAdd);\r\n\r\n  return {\r\n    cartItems: updateItems(cartItems, newItem, itemIndex),\r\n    orderTotal: orderTotal + book.price * countToAdd\r\n  };\r\n};\r\n\r\n// универсальная функция для обновления массива\r\nconst updateItems = (items, newItem, index) => {\r\n  const { count } = newItem;\r\n\r\n  if (index === -1) {\r\n    return [...items, newItem]; // если книги в корзине нет - добавить новый элемент в конец массива\r\n  }\r\n\r\n  // если count = 0 - удаляем item из массива\r\n  if (count === 0) {\r\n    return [\r\n      ...items.slice(0, index), // before\r\n      ...items.slice(index + 1) // after\r\n    ];\r\n  }\r\n\r\n  // если count != 0 - обновляем item в массиве\r\n  return [\r\n    ...items.slice(0, index), // before\r\n    newItem,\r\n    ...items.slice(index + 1) // after\r\n  ];\r\n};\r\n\r\nconst updateCartItem = (book, item = {}, countToAdd) => {\r\n  // если item === undefined, to заменится на {}\r\n  // чтобы можно было применить параметры по умолчанию\r\n  const { id = book.id, title = book.title, count = 0, total = 0 } = item;\r\n\r\n  return {\r\n    id,\r\n    title,\r\n    count: count + countToAdd,\r\n    total: total + book.price * countToAdd\r\n  };\r\n};\r\n\r\nexport { compose, updateCart };\r\n","import Spinner from \"./spinner\";\r\n\r\nexport default Spinner;\r\n","import React from 'react';\r\nimport './spinner.css'\r\n\r\nconst Spinner = () => {\r\n  return <div>Loading...</div>\r\n}\r\n\r\nexport default Spinner;","import ErrorIndicator from './error-indicator';\r\n\r\nexport default ErrorIndicator;","import React from 'react';\r\n\r\nimport './error-indicator.css';\r\n\r\nconst ErrorIndicator = () => {\r\n  return (\r\n    <div>\r\n      Error!\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ErrorIndicator;","import BookListItem from './book-list-item';\r\n\r\nexport default BookListItem;","import React from \"react\";\r\n\r\nimport \"./book-list-item.css\";\r\n\r\nconst BookListItem = ({ book, onAdd }) => {\r\n  const { title, author, price, coverImage } = book;\r\n  return (\r\n    <div className=\"book-list-item\">\r\n      <div className=\"book-cover\">\r\n        <img src={coverImage} alt=\"cover\" />\r\n      </div>\r\n      <div className=\"book-details\">\r\n        <span className=\"book-title\">{title}</span>\r\n        <span className=\"book-author\">{author}</span>\r\n        <span className=\"book-price\">{price}</span>\r\n        <button type=\"button\" className=\"btn btn-info add-to-cart\" onClick={onAdd}>\r\n          Add to cart\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookListItem;\r\n","import BookList from './book-list';\r\n\r\nexport default BookList;","import React from \"react\";\r\n\r\nimport \"./book-list.css\";\r\n\r\nimport BookListItem from \"../book-list-item\";\r\n\r\nconst BookList = ({ books, onAdd }) => {\r\n  const bookList = books.map(book => (\r\n    <li key={book.id}>\r\n      <BookListItem\r\n        book={book}\r\n        onAdd={() => onAdd(book.id)}\r\n      />\r\n    </li>\r\n  ));\r\n  return <ul className=\"book-list\">{bookList}</ul>;\r\n};\r\n\r\nexport default BookList;\r\n","import React, { Component } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport withBookstoreService from \"../../components/HOC\";\r\nimport { fetchBooks, bookAddedToCart } from \"../../actions\";\r\nimport { compose } from \"../../utils\";\r\n\r\nimport Spinner from \"../../components/spinner\";\r\nimport ErrorIndicator from \"../../components/error-indicator\";\r\nimport BookList from \"../../components/book-list\";\r\n\r\nclass BookListContainer extends Component {\r\n  componentDidMount() {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, isLoading, error, onAdd } = this.props;\r\n\r\n    if (isLoading) return <Spinner />;\r\n\r\n    if (error) return <ErrorIndicator />;\r\n\r\n    return <BookList books={books} onAdd={onAdd} />;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ bookList }) => bookList;\r\n\r\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\r\n  /*return {\r\n    // старый синтаксис, без thunkMiddleware\r\n    // fetchBooks: fetchBooks(bookstoreService, dispatch),\r\n    // новый синтаксис, теперь fetchBooks - это actionCreator\r\n    fetchBooks: () => dispatch(fetchBooks(bookstoreService)()),\r\n    onAdd: id => dispatch(bookAddedToCart(id))\r\n  };*/\r\n  // самый крутой вариант\r\n  return bindActionCreators(\r\n    {\r\n      fetchBooks: fetchBooks(bookstoreService),\r\n      // создаст action-функцию, которую обработает thunkMiddleware\r\n      onAdd: bookAddedToCart\r\n      // создаст action-объект\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport default compose(\r\n  withBookstoreService(),\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )\r\n)(BookListContainer);\r\n","import BookListContainer from './book-list-container';\r\n\r\nexport default BookListContainer;","import React from \"react\";\r\nimport ShoppingCartTable from \"../shopping-cart-table\";\r\nimport BookListContainer from \"../../containers/book-list-container\";\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <>\r\n      <BookListContainer />\r\n      <ShoppingCartTable />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import React from \"react\";\r\n\r\nconst CartPage = () => {\r\n  return <h1>Cart Page</h1>;\r\n};\r\n\r\nexport default CartPage;\r\n","import ShopHeader from './shop-header';\r\n\r\nexport default ShopHeader;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport \"./shop-header.css\";\r\n\r\nconst ShopHeader = ({ cartItems, orderTotal }) => {\r\n  const numItems = cartItems.reduce((acc, { count }) => acc + count, 0);\r\n  return (\r\n    <header className=\"row shop-header\">\r\n      <Link className=\"logo text-dark\" to=\"/\">\r\n        ReStore\r\n      </Link>\r\n      <Link className=\"shopping-cart\" to=\"/cart\">\r\n        <i className=\"cart-icon fa fa-shopping-cart\" />\r\n        {numItems} items (${orderTotal})\r\n      </Link>\r\n    </header>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart }) => shoppingCart;\r\n\r\nexport default connect(mapStateToProps)(ShopHeader);\r\n","import App from \"./app\";\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\n\r\nimport \"./app.css\";\r\nimport { HomePage, CartPage } from \"../pages\";\r\nimport ShopHeader from \"../shop-header\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <main role=\"main\" className=\"container\">\r\n    <ShopHeader numItems={5} total={100} />\r\n      <Switch>\r\n        <Route path=\"/\" exact component={HomePage} />\r\n        <Route path=\"/cart\" component={CartPage} />\r\n      </Switch>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import ErrorBoundary from './error-boundary';\r\n\r\nexport default ErrorBoundary;\r\n","import React, { Component } from 'react';\r\n\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nclass ErrorBoundary extends Component {\r\n  state = {\r\n    hasError: false\r\n  };\r\n\r\n  componentDidCatch() {\r\n    this.setState({\r\n      hasError: true,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { hasError } = this.state;\r\n    return hasError ? <ErrorIndicator /> : this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;\r\n","const updateBookList = (state = {}, action) => {\r\n  const {\r\n    bookList = {\r\n      books: [],\r\n      isLoading: true,\r\n      error: null\r\n    }\r\n  } = state;\r\n  switch (action.type) {\r\n    case \"FETCH_BOOKS_REQUEST\":\r\n      return { books: [], isLoading: true, error: null };\r\n\r\n    case \"FETCH_BOOKS_SUCCESS\":\r\n      return { books: action.payload, isLoading: false, error: null };\r\n\r\n    case \"FETCH_BOOKS_ERROR\":\r\n      return { books: [], isLoading: false, error: action.payload };\r\n    default:\r\n      return bookList;\r\n  }\r\n};\r\n\r\nexport default updateBookList;\r\n","import { updateCart } from \"../utils\";\r\n\r\nconst updateShoppingCart = (state = {}, action) => {\r\n  const {\r\n    shoppingCart = {\r\n      cartItems: [],\r\n      orderTotal: 0\r\n    }\r\n  } = state;\r\n  switch (action.type) {\r\n    case \"BOOK_ADDED_TO_CART\":\r\n      return updateCart(action.payload, state, 1);\r\n\r\n    case \"BOOK_DELETED_FROM_CART\":\r\n      return updateCart(action.payload, state, -1);\r\n\r\n    case \"ALL_BOOKS_DELETED_FROM_CART\":\r\n      const item = shoppingCart.cartItems.find(\r\n        ({ id }) => id === action.payload\r\n      );\r\n      return updateCart(action.payload, state, -item.count);\r\n\r\n    default:\r\n      return shoppingCart;\r\n  }\r\n};\r\n\r\nexport default updateShoppingCart;\r\n","import updateBookList from './update-book-list';\r\nimport updateShoppingCart from './update-shopping-cart';\r\n\r\nconst reducer = (state, action) => {\r\n  return {\r\n    shoppingCart: updateShoppingCart(state, action),\r\n    bookList: updateBookList(state, action),\r\n  };\r\n};\r\n\r\nexport default reducer;\r\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nimport App from \"./components/app\";\nimport ErrorBoundary from \"./components/error-boundary\";\nimport BookstoreService from \"./services/bookstore-service\";\nimport { BookstoreServiceProvider } from \"./components/bookstore-service-context\";\n\nimport store from \"./store\";\n\nconst bookstoreService = new BookstoreService();\n\n/*\nclass App extends Component {\n  state = {\n    bookstoreService: new BookstoreService(),\n  };\n  render() {\n    const { bookstoreService } = this.state;\n\n    return (\n      <ErrorBoundary>\n        <BookstoreServiceProvider value={bookstoreService}>\n          {`hello`}\n        </BookstoreServiceProvider>\n      </ErrorBoundary>\n    );\n  }\n */\n\nrender(\n  <Provider store={store}>\n    <ErrorBoundary>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundary>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n/*\nстандартная структура react-redux приложения\nгарантирует, что любые компоненты внутри App будут иметь доступ к роутеру, сервису и хранилищу, а также, что любые ошибки будут отлавливаться\n*/\n","export default class BookstoreService {\r\n  data = [\r\n    {\r\n      id: 1,\r\n      title: \"Production-Ready Microservices\",\r\n      author: \"Susan J. Fowler\",\r\n      price: 32,\r\n      coverImage:\r\n        \"https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg\"\r\n    },\r\n    {\r\n      id: 2,\r\n      title: \"Release It!\",\r\n      author: \"Michael T. Nygard\",\r\n      price: 45,\r\n      coverImage:\r\n        \"https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg\"\r\n    }\r\n  ];\r\n  getBooks = () => {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        if (Math.random() < 0.75) {\r\n          resolve(this.data);\r\n        } else {\r\n          reject(new Error(\"Something got wrong\"));\r\n        }\r\n      }, 1000);\r\n    });\r\n  };\r\n}\r\n"],"sourceRoot":""}